{"version":3,"file":"dashboard.element-rL4uqz_q.js","sources":["../../../Client/src/utils/format-utils.ts","../../../Client/src/components/app-info-banner.element.ts","../../../Client/src/components/metric-card.element.ts","../../../Client/src/components/metrics-grid.element.ts","../../../Client/src/components/stat-card.element.ts","../../../Client/src/dashboards/dashboard.element.ts"],"sourcesContent":["import type { MetricCardColor } from \"../components/metric-card.element.js\";\r\n\r\n/**\r\n * Returns a color based on value relative to threshold\r\n * @param value - The current value\r\n * @param threshold - The threshold for danger state\r\n * @returns 'danger' if > threshold, 'warning' if > 70% of threshold, otherwise 'positive'\r\n */\r\nexport function getStatusColor(value: number, threshold: number): MetricCardColor {\r\n  return value > threshold\r\n    ? \"danger\"\r\n    : value > threshold * 0.7\r\n    ? \"warning\"\r\n    : \"positive\";\r\n}\r\n\r\n/**\r\n * Formats a number with locale-specific separators\r\n * @param num - The number to format\r\n * @returns Formatted string with separators (e.g., \"1,234,567\")\r\n */\r\nexport function formatNumber(num: number): string {\r\n  return num.toLocaleString();\r\n}\r\n\r\n/**\r\n * Formats bytes to human-readable string\r\n * @param bytes - Number of bytes\r\n * @returns Formatted string (e.g., \"1.5 MB\")\r\n */\r\nexport function formatBytes(bytes: number): string {\r\n  if (bytes < 1024) return `${bytes} B`;\r\n  if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(2)} KB`;\r\n  if (bytes < 1024 * 1024 * 1024) return `${(bytes / 1024 / 1024).toFixed(2)} MB`;\r\n  return `${(bytes / 1024 / 1024 / 1024).toFixed(2)} GB`;\r\n}\r\n\r\n/**\r\n * Formats uptime seconds to human-readable string\r\n * @param seconds - Total seconds\r\n * @returns Formatted string (e.g., \"2d 5h 30m 15s\")\r\n */\r\nexport function formatUptime(seconds: number): string {\r\n  const days = Math.floor(seconds / 86400);\r\n  const hours = Math.floor((seconds % 86400) / 3600);\r\n  const minutes = Math.floor((seconds % 3600) / 60);\r\n  const secs = Math.floor(seconds % 60);\r\n  return `${days}d ${hours}h ${minutes}m ${secs}s`;\r\n}","import {\r\n  LitElement,\r\n  css,\r\n  html,\r\n  customElement,\r\n  property,\r\n  unsafeCSS,\r\n} from \"@umbraco-cms/backoffice/external/lit\";\r\nimport { UmbElementMixin } from \"@umbraco-cms/backoffice/element-api\";\r\nimport type { ApplicationInfo } from \"../types/performance-metrics.js\";\r\nimport { formatUptime } from \"../utils/format-utils.js\";\r\nimport styles from \"../css/app-info-banner.styles.css?inline\";\r\n\r\n@customElement(\"umbmetrics-app-info-banner\")\r\nexport class AppInfoBannerElement extends UmbElementMixin(LitElement) {\r\n  @property({ type: Object })\r\n  applicationInfo?: ApplicationInfo;\r\n\r\n  @property({ type: Boolean })\r\n  isConnected: boolean = false;\r\n\r\n  render() {\r\n    if (!this.applicationInfo) {\r\n      return html``;\r\n    }\r\n\r\n    return html`\r\n      <div class=\"app-info-banner\">\r\n        <div class=\"info-item\">\r\n          <strong>Process:</strong> ${this.applicationInfo.processName} (PID: ${this.applicationInfo.processId})\r\n        </div>\r\n        <div class=\"info-item\">\r\n          <strong>Runtime:</strong> ${this.applicationInfo.runtimeVersion}\r\n        </div>\r\n        <div class=\"info-item\">\r\n          <strong>Architecture:</strong> ${this.applicationInfo.is64BitProcess ? \"64-bit\" : \"32-bit\"}\r\n        </div>\r\n        <div class=\"info-item\">\r\n          <strong>CPU Cores:</strong> ${this.applicationInfo.processorCount}\r\n        </div>\r\n        <div class=\"info-item\">\r\n          <strong>Uptime:</strong> ${formatUptime(this.applicationInfo.uptimeSeconds)}\r\n        </div>\r\n        ${this.isConnected ? html`\r\n          <div class=\"info-item connected\">\r\n            <uui-icon name=\"icon-check\"></uui-icon>\r\n            <strong>SignalR Connected</strong>\r\n          </div>\r\n        ` : ''}\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  static styles = css`${unsafeCSS(styles)}`;\r\n}\r\n\r\nexport default AppInfoBannerElement;\r\n\r\ndeclare global {\r\n  interface HTMLElementTagNameMap {\r\n    \"umbmetrics-app-info-banner\": AppInfoBannerElement;\r\n  }\r\n}","import {\r\n  LitElement,\r\n  css,\r\n  html,\r\n  customElement,\r\n  property,\r\n} from \"@umbraco-cms/backoffice/external/lit\";\r\nimport { UmbElementMixin } from \"@umbraco-cms/backoffice/element-api\";\r\n\r\nexport type MetricCardColor = 'default' | 'positive' | 'warning' | 'danger';\r\n\r\n@customElement(\"umbmetrics-metric-card\")\r\nexport class MetricCardElement extends UmbElementMixin(LitElement) {\r\n  @property({ type: String })\r\n  icon: string = \"icon-info\";\r\n\r\n  @property({ type: String })\r\n  title: string = \"\";\r\n\r\n  @property({ type: String })\r\n  value: string = \"\";\r\n\r\n  @property({ type: String })\r\n  detail: string = \"\";\r\n\r\n  @property({ type: String })\r\n  color: MetricCardColor = \"default\";\r\n\r\n  @property({ type: Number, reflect: true })\r\n  span: number = 1;\r\n\r\n  @property({ type: Boolean })\r\n  clickable: boolean = false;\r\n\r\n  @property({ type: String })\r\n  actionIcon: string = \"icon-activity\";\r\n\r\n  @property({ type: String })\r\n  actionLabel: string = \"View Details\";\r\n\r\n  #handleClick = (e: Event) => {\r\n    e.stopPropagation();\r\n    if (this.clickable) {\r\n      this.dispatchEvent(new CustomEvent('card-action', { bubbles: true, composed: true }));\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return html`\r\n      <div class=\"metric-card\">\r\n        <div class=\"card-header\">\r\n          <div class=\"header-title\">\r\n            <uui-icon name=\"${this.icon}\"></uui-icon>\r\n            <h3>${this.title}</h3>\r\n          </div>\r\n          ${this.clickable ? html`\r\n            <uui-button \r\n              class=\"action-button\"\r\n              look=\"secondary\" \r\n              compact \r\n              @click=\"${this.#handleClick}\"\r\n              title=\"${this.actionLabel}\"\r\n            >\r\n              <uui-icon name=\"${this.actionIcon}\"></uui-icon>\r\n            </uui-button>\r\n          ` : ''}\r\n        </div>\r\n        \r\n        <div class=\"card-body\">\r\n          <div class=\"metric-value ${this.color}\">\r\n            ${this.value}\r\n          </div>\r\n          ${this.detail ? html`<div class=\"metric-detail\">${this.detail}</div>` : ''}\r\n          <slot></slot>\r\n        </div>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  static styles = css`\r\n    :host {\r\n      display: block;\r\n      height: 100%;\r\n    }\r\n\r\n    :host([span=\"2\"]) {\r\n      grid-column: span 2;\r\n    }\r\n\r\n    :host([span=\"3\"]) {\r\n      grid-column: span 3;\r\n    }\r\n\r\n    :host([span=\"4\"]) {\r\n      grid-column: span 4;\r\n    }\r\n\r\n    .metric-card {\r\n      display: flex;\r\n      flex-direction: column;\r\n      height: 100%;\r\n      background: var(--uui-color-surface);\r\n      border: 1px solid var(--uui-color-border);\r\n      border-radius: var(--uui-border-radius);\r\n      overflow: hidden;\r\n    }\r\n\r\n    .card-header {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      padding: 0.75rem 1rem;\r\n      background: var(--uui-color-surface-alt);\r\n      border-bottom: 1px solid var(--uui-color-border);\r\n      min-height: 48px;\r\n    }\r\n\r\n    .header-title {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 0.5rem;\r\n    }\r\n\r\n    .header-title uui-icon {\r\n      font-size: 1.25rem;\r\n      color: var(--uui-color-interactive);\r\n    }\r\n\r\n    .header-title h3 {\r\n      margin: 0;\r\n      font-size: 0.875rem;\r\n      font-weight: 600;\r\n      color: var(--uui-color-text-alt);\r\n    }\r\n\r\n    .action-button {\r\n      --uui-button-height: 28px;\r\n      --uui-button-padding-left-factor: 1;\r\n      --uui-button-padding-right-factor: 1;\r\n    }\r\n\r\n    .action-button uui-icon {\r\n      font-size: 1rem;\r\n    }\r\n\r\n    .card-body {\r\n      display: flex;\r\n      flex-direction: column;\r\n      justify-content: center;\r\n      align-items: center;\r\n      flex: 1;\r\n      padding: 1.25rem 1rem;\r\n      text-align: center;\r\n    }\r\n\r\n    .metric-value {\r\n      font-size: 1.75rem;\r\n      font-weight: 700;\r\n      color: var(--uui-color-text);\r\n      line-height: 1.2;\r\n    }\r\n\r\n    .metric-value.positive {\r\n      color: var(--uui-color-positive);\r\n    }\r\n\r\n    .metric-value.warning {\r\n      color: var(--uui-color-warning);\r\n    }\r\n\r\n    .metric-value.danger {\r\n      color: var(--uui-color-danger);\r\n    }\r\n\r\n    .metric-detail {\r\n      font-size: 0.8rem;\r\n      color: var(--uui-color-text-alt);\r\n      margin-top: 0.5rem;\r\n    }\r\n  `;\r\n}\r\n\r\nexport default MetricCardElement;\r\n\r\ndeclare global {\r\n  interface HTMLElementTagNameMap {\r\n    \"umbmetrics-metric-card\": MetricCardElement;\r\n  }\r\n}","import {\r\n  LitElement,\r\n  css,\r\n  html,\r\n  customElement,\r\n  property,\r\n} from \"@umbraco-cms/backoffice/external/lit\";\r\nimport { UmbElementMixin } from \"@umbraco-cms/backoffice/element-api\";\r\n\r\n@customElement(\"umbmetrics-metrics-grid\")\r\nexport class MetricsGridElement extends UmbElementMixin(LitElement) {\r\n  @property({ type: Number })\r\n  columns: number = 4;\r\n\r\n  render() {\r\n    return html`\r\n      <div class=\"metrics-grid\" style=\"--grid-columns: ${this.columns}\">\r\n        <slot></slot>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  static styles = css`\r\n    :host {\r\n      display: block;\r\n    }\r\n\r\n    .metrics-grid {\r\n      display: grid;\r\n      grid-template-columns: repeat(var(--grid-columns, 4), 1fr);\r\n      grid-auto-rows: 1fr;\r\n      gap: 1rem;\r\n    }\r\n\r\n    @media (max-width: 1200px) {\r\n      .metrics-grid {\r\n        grid-template-columns: repeat(2, 1fr);\r\n      }\r\n    }\r\n\r\n    @media (max-width: 768px) {\r\n      .metrics-grid {\r\n        grid-template-columns: 1fr;\r\n      }\r\n    }\r\n\r\n    /* Handle span classes for slotted elements */\r\n    ::slotted([span=\"2\"]) {\r\n      grid-column: span 2;\r\n    }\r\n\r\n    ::slotted([span=\"3\"]) {\r\n      grid-column: span 3;\r\n    }\r\n\r\n    ::slotted([span=\"4\"]) {\r\n      grid-column: span 4;\r\n    }\r\n  `;\r\n}\r\n\r\nexport default MetricsGridElement;\r\n\r\ndeclare global {\r\n  interface HTMLElementTagNameMap {\r\n    \"umbmetrics-metrics-grid\": MetricsGridElement;\r\n  }\r\n}","import {\r\n  LitElement,\r\n  css,\r\n  html,\r\n  customElement,\r\n  property,\r\n} from \"@umbraco-cms/backoffice/external/lit\";\r\nimport { UmbElementMixin } from \"@umbraco-cms/backoffice/element-api\";\r\n\r\nexport interface StatRow {\r\n  label: string;\r\n  value: string | number;\r\n  color?: 'default' | 'positive' | 'warning' | 'danger';\r\n}\r\n\r\n@customElement(\"umbmetrics-stat-card\")\r\nexport class StatCardElement extends UmbElementMixin(LitElement) {\r\n  @property({ type: String })\r\n  icon: string = \"icon-info\";\r\n\r\n  @property({ type: String })\r\n  title: string = \"\";\r\n\r\n  @property({ type: Array })\r\n  stats: StatRow[] = [];\r\n\r\n  @property({ type: Number, reflect: true })\r\n  span: number = 1;\r\n\r\n  render() {\r\n    return html`\r\n      <div class=\"stat-card\">\r\n        <div class=\"card-header\">\r\n          <div class=\"header-title\">\r\n            <uui-icon name=\"${this.icon}\"></uui-icon>\r\n            <h3>${this.title}</h3>\r\n          </div>\r\n        </div>\r\n        \r\n        <div class=\"card-body\">\r\n          <div class=\"stats-list\">\r\n            ${this.stats.map(stat => html`\r\n              <div class=\"stat-row\">\r\n                <span class=\"stat-label\">${stat.label}</span>\r\n                <strong class=\"${stat.color || 'default'}\">${stat.value}</strong>\r\n              </div>\r\n            `)}\r\n          </div>\r\n          <slot></slot>\r\n        </div>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  static styles = css`\r\n    :host {\r\n      display: block;\r\n      height: 100%;\r\n    }\r\n\r\n    :host([span=\"2\"]) {\r\n      grid-column: span 2;\r\n    }\r\n\r\n    :host([span=\"3\"]) {\r\n      grid-column: span 3;\r\n    }\r\n\r\n    :host([span=\"4\"]) {\r\n      grid-column: span 4;\r\n    }\r\n\r\n    .stat-card {\r\n      display: flex;\r\n      flex-direction: column;\r\n      height: 100%;\r\n      background: var(--uui-color-surface);\r\n      border: 1px solid var(--uui-color-border);\r\n      border-radius: var(--uui-border-radius);\r\n      overflow: hidden;\r\n    }\r\n\r\n    .card-header {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      padding: 0.75rem 1rem;\r\n      background: var(--uui-color-surface-alt);\r\n      border-bottom: 1px solid var(--uui-color-border);\r\n      min-height: 48px;\r\n    }\r\n\r\n    .header-title {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 0.5rem;\r\n    }\r\n\r\n    .header-title uui-icon {\r\n      font-size: 1.25rem;\r\n      color: var(--uui-color-interactive);\r\n    }\r\n\r\n    .header-title h3 {\r\n      margin: 0;\r\n      font-size: 0.875rem;\r\n      font-weight: 600;\r\n      color: var(--uui-color-text-alt);\r\n    }\r\n\r\n    .card-body {\r\n      flex: 1;\r\n      padding: 1rem;\r\n    }\r\n\r\n    .stats-list {\r\n      display: flex;\r\n      flex-direction: column;\r\n      gap: 0.5rem;\r\n    }\r\n\r\n    .stat-row {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      padding: 0.5rem 0;\r\n      border-bottom: 1px solid var(--uui-color-border);\r\n    }\r\n\r\n    .stat-row:last-child {\r\n      border-bottom: none;\r\n    }\r\n\r\n    .stat-label {\r\n      color: var(--uui-color-text-alt);\r\n      font-size: 0.875rem;\r\n    }\r\n\r\n    .stat-row strong {\r\n      font-size: 0.95rem;\r\n      font-weight: 600;\r\n    }\r\n\r\n    .stat-row strong.positive {\r\n      color: var(--uui-color-positive);\r\n    }\r\n\r\n    .stat-row strong.warning {\r\n      color: var(--uui-color-warning);\r\n    }\r\n\r\n    .stat-row strong.danger {\r\n      color: var(--uui-color-danger);\r\n    }\r\n\r\n    .stat-row strong.default {\r\n      color: var(--uui-color-text);\r\n    }\r\n  `;\r\n}\r\n\r\nexport default StatCardElement;\r\n\r\ndeclare global {\r\n  interface HTMLElementTagNameMap {\r\n    \"umbmetrics-stat-card\": StatCardElement;\r\n  }\r\n}","import {\r\n  LitElement,\r\n  css,\r\n  unsafeCSS,\r\n  html,\r\n  customElement,\r\n  state,\r\n} from \"@umbraco-cms/backoffice/external/lit\";\r\nimport { UmbElementMixin } from \"@umbraco-cms/backoffice/element-api\";\r\nimport { UUIButtonElement } from \"@umbraco-cms/backoffice/external/uui\";\r\nimport { UMB_NOTIFICATION_CONTEXT } from \"@umbraco-cms/backoffice/notification\";\r\nimport { UMB_CURRENT_USER_CONTEXT, UmbCurrentUserModel } from \"@umbraco-cms/backoffice/current-user\";\r\nimport { UMB_AUTH_CONTEXT } from \"@umbraco-cms/backoffice/auth\";\r\nimport type { UmbAuthContext } from \"@umbraco-cms/backoffice/auth\";\r\nimport { MetricsPerformanceService } from \"../services/metrics-performance.service.js\";\r\nimport type { PerformanceMetrics } from \"../types/performance-metrics.js\";\r\nimport type { UmbracoMetrics } from \"../types/umbraco-metrics.js\";\r\n\r\nimport type { StatRow } from \"../components/stat-card.element.js\";\r\nimport { getStatusColor, formatNumber } from \"../utils/format-utils.js\";\r\nimport \"../components/app-info-banner.element.js\";\r\nimport \"../components/metric-card.element.js\";\r\nimport \"../components/metrics-grid.element.js\";\r\nimport \"../components/stat-card.element.js\";\r\nimport \"../components/active-requests-sidebar.element.js\";\r\nimport stylesString from '../css/dashboard.element.css?inline';\r\nimport { UMB_MODAL_MANAGER_CONTEXT } from \"@umbraco-cms/backoffice/modal\";\r\nimport { ACTIVE_REQUESTS_SIDEBAR_MODAL } from \"../components/active-requests-sidebar.modal.js\";\r\nimport { UMB_METRICS_EXPORT_MODAL } from \"../components/export-modal.token.js\";\r\n\r\n@customElement(\"umbmetrics-dashboard\")\r\nexport class UmbMetrcisDashboardElement extends UmbElementMixin(LitElement) {\r\n  @state()\r\n  private _contextCurrentUser?: UmbCurrentUserModel;\r\n\r\n  @state()\r\n  private _performanceMetrics?: PerformanceMetrics;\r\n\r\n  @state()\r\n  private _autoRefresh: boolean = false;\r\n\r\n  @state()\r\n  private _activeTab: string = \"overview\";\r\n\r\n  @state()\r\n  private _isConnected: boolean = false;\r\n\r\n  @state()\r\n  private _umbracoMetrics?: UmbracoMetrics;\r\n\r\n\r\n\r\n  #notificationContext?: typeof UMB_NOTIFICATION_CONTEXT.TYPE;\r\n  #authContext?: UmbAuthContext;\r\n  #metricsService?: MetricsPerformanceService;\r\n  #unsubscribe?: () => void;\r\n\r\n  constructor() {\r\n    super();\r\n\r\n    this.consumeContext(UMB_NOTIFICATION_CONTEXT, (notificationContext) => {\r\n      this.#notificationContext = notificationContext;\r\n    });\r\n\r\n    this.consumeContext(UMB_CURRENT_USER_CONTEXT, (currentUserContext) => {\r\n      this.observe(\r\n        currentUserContext?.currentUser,\r\n        (currentUser) => {\r\n          this._contextCurrentUser = currentUser;\r\n        },\r\n        \"_contextCurrentUser\"\r\n      );\r\n    });\r\n\r\n    this.consumeContext(UMB_AUTH_CONTEXT, (authContext) => {\r\n      this.#authContext = authContext;\r\n      \r\n      this.#metricsService = new MetricsPerformanceService(async () => {\r\n        const token = await this.#authContext?.getLatestToken();\r\n        if (!token) {\r\n          throw new Error('No authentication token available');\r\n        }\r\n        return token;\r\n      });\r\n    });\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    super.disconnectedCallback();\r\n    this.#stopAutoRefresh();\r\n  }\r\n\r\n  #onClickRefreshMetrics = async (ev: Event) => {\r\n    if (!this.#metricsService) {\r\n      console.error('Metrics service not initialized');\r\n      return;\r\n    }\r\n\r\n    const buttonElement = ev.target as UUIButtonElement;\r\n    buttonElement.state = \"waiting\";\r\n\r\n    try {\r\n      if (this._autoRefresh && this.#metricsService.isConnected) {\r\n        await this.#metricsService.requestMetrics();\r\n        this.#loadUmbracoMetrics();\r\n      } else {\r\n        await Promise.all([\r\n          this.#loadPerformanceMetrics(),\r\n          this.#loadUmbracoMetrics()\r\n        ]);\r\n      }\r\n      buttonElement.state = \"success\";\r\n    } catch (error) {\r\n      console.error('Error refreshing metrics:', error);\r\n      buttonElement.state = \"failed\";\r\n    }\r\n  };\r\n\r\n  #loadPerformanceMetrics = async () => {\r\n    if (!this.#metricsService) {\r\n      console.error('Metrics service not initialized');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      this._performanceMetrics = await this.#metricsService.getPerformanceMetrics();\r\n    } catch (error) {\r\n      console.error(\"Error loading performance metrics:\", error);\r\n      if (this.#notificationContext) {\r\n        this.#notificationContext.peek(\"danger\", {\r\n          data: {\r\n            headline: \"Error\",\r\n            message: error instanceof Error \r\n              ? error.message \r\n              : \"Failed to load performance metrics\",\r\n          },\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  async #loadUmbracoMetrics() {\r\n    if (!this.#metricsService) {\r\n      console.error('Metrics service not initialized');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      this._umbracoMetrics = await this.#metricsService.getUmbracoMetrics();\r\n    } catch (error) {\r\n      console.error(\"Error loading Umbraco metrics:\", error);\r\n      if (this.#notificationContext) {\r\n        this.#notificationContext.peek(\"danger\", {\r\n          data: {\r\n            headline: \"Error\",\r\n            message: error instanceof Error \r\n              ? error.message \r\n              : \"Failed to load Umbraco metrics\",\r\n          },\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n\r\n  \r\n\r\n\r\n  #openActiveRequestsSidebar = async () => {\r\n    const modalManager = await this.getContext(UMB_MODAL_MANAGER_CONTEXT);\r\n    \r\n    modalManager?.open(\r\n      this, \r\n      ACTIVE_REQUESTS_SIDEBAR_MODAL   \r\n    );\r\n  }\r\n\r\n  #openExportModal = async () => {\r\n    const modalManager = await this.getContext(UMB_MODAL_MANAGER_CONTEXT);\r\n    \r\n    modalManager?.open(\r\n      this, \r\n      UMB_METRICS_EXPORT_MODAL   \r\n    );\r\n  }\r\n \r\n\r\n  #toggleAutoRefresh = async () => {\r\n    this._autoRefresh = !this._autoRefresh;\r\n\r\n    if (this._autoRefresh) {\r\n      await this.#startAutoRefresh();\r\n    } else {\r\n      await this.#stopAutoRefresh();\r\n    }\r\n  };\r\n\r\n  #startAutoRefresh = async () => {\r\n    if (!this.#metricsService) {\r\n      console.error('Metrics service not initialized');\r\n      this._autoRefresh = false;\r\n      return;\r\n    }\r\n\r\n    try {\r\n      if (this.#notificationContext) {\r\n        this.#notificationContext.peek(\"default\", {\r\n          data: {\r\n            headline: \"Connecting...\",\r\n            message: \"Establishing connection to metrics hub\",\r\n          },\r\n        });\r\n      }\r\n\r\n      this.#unsubscribe = this.#metricsService.onMetricsUpdate((metrics) => {\r\n        this._performanceMetrics = metrics;\r\n        this._isConnected = true;\r\n      });\r\n\r\n      await this.#metricsService.connectToHub();\r\n      this._isConnected = this.#metricsService.isConnected;\r\n\r\n      if (this._isConnected && this.#notificationContext) {\r\n        this.#notificationContext.peek(\"positive\", {\r\n          data: {\r\n            headline: \"Connected\",\r\n            message: \"Real-time metrics updates enabled\",\r\n          },\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error starting auto-refresh:\", error);\r\n      this._autoRefresh = false;\r\n      this._isConnected = false;\r\n\r\n      if (this.#notificationContext) {\r\n        this.#notificationContext.peek(\"danger\", {\r\n          data: {\r\n            headline: \"Connection Failed\",\r\n            message: error instanceof Error \r\n              ? error.message \r\n              : \"Failed to connect to metrics hub. Try again.\",\r\n          },\r\n        });\r\n      }\r\n\r\n      if (this.#unsubscribe) {\r\n        this.#unsubscribe();\r\n        this.#unsubscribe = undefined;\r\n      }\r\n    }\r\n  };\r\n\r\n  #stopAutoRefresh = async () => {\r\n    if (!this.#metricsService) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      if (this.#unsubscribe) {\r\n        this.#unsubscribe();\r\n        this.#unsubscribe = undefined;\r\n      }\r\n\r\n      await this.#metricsService.disconnectFromHub();\r\n      this._isConnected = false;\r\n\r\n      if (this.#notificationContext) {\r\n        this.#notificationContext.peek(\"default\", {\r\n          data: {\r\n            headline: \"Disconnected\",\r\n            message: \"Real-time updates disabled\",\r\n          },\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error stopping auto-refresh:\", error);\r\n    }\r\n  };\r\n\r\n  #switchTab = (tabName: string) => {\r\n    this._activeTab = tabName;\r\n  };\r\n\r\n  #renderOverviewTab() {\r\n    if (!this._performanceMetrics) {\r\n      return html`<p>Click \"Refresh Metrics\" to load application performance data</p>`;\r\n    }\r\n\r\n    const m = this._performanceMetrics;\r\n\r\n    return html`\r\n      <umbmetrics-app-info-banner\r\n        .applicationInfo=${m.applicationInfo}\r\n        .isConnected=${this._isConnected}\r\n      ></umbmetrics-app-info-banner>\r\n\r\n      <umbmetrics-metrics-grid columns=\"4\">\r\n        <umbmetrics-metric-card\r\n          icon=\"icon-dashboard\"\r\n          title=\"CPU Usage\"\r\n          value=\"${m.cpuUsage.toFixed(1)}%\"\r\n          detail=\"Process CPU\"\r\n          color=\"${getStatusColor(m.cpuUsage, 80)}\"\r\n        ></umbmetrics-metric-card>\r\n\r\n        <umbmetrics-metric-card\r\n          icon=\"icon-memory\"\r\n          title=\"Working Set\"\r\n          value=\"${m.memoryUsage.workingSetMB.toFixed(0)} MB\"\r\n          detail=\"Private: ${m.memoryUsage.privateMemoryMB.toFixed(0)} MB\"\r\n        ></umbmetrics-metric-card>\r\n\r\n        <umbmetrics-metric-card\r\n          icon=\"icon-activity\"\r\n          title=\"Requests/Sec\"\r\n          value=\"${m.requestMetrics.requestsPerSecond.toFixed(2)}\"\r\n          detail=\"Last min: ${m.requestMetrics.lastMinuteRequests}\"\r\n        ></umbmetrics-metric-card>\r\n\r\n        <umbmetrics-metric-card\r\n          icon=\"icon-timer\"\r\n          title=\"Avg Response\"\r\n          value=\"${m.requestMetrics.averageResponseTimeMs.toFixed(0)} ms\"\r\n          detail=\"Last 100 requests\"\r\n          color=\"${getStatusColor(m.requestMetrics.averageResponseTimeMs, 1000)}\"\r\n        ></umbmetrics-metric-card>\r\n\r\n        <umbmetrics-metric-card\r\n          icon=\"icon-link\"\r\n          title=\"Active Requests\"\r\n          value=\"${m.requestMetrics.activeRequests}\"\r\n          detail=\"Total: ${formatNumber(m.requestMetrics.totalRequests)}\"\r\n          ?clickable=${true}\r\n          actionLabel=\"View Details\"\r\n          @card-action=\"${this.#openActiveRequestsSidebar}\"\r\n        ></umbmetrics-metric-card>\r\n\r\n        <umbmetrics-metric-card\r\n          icon=\"icon-alert\"\r\n          title=\"Failed Requests\"\r\n          value=\"${formatNumber(m.requestMetrics.failedRequests)}\"\r\n          detail=\"4xx/5xx responses\"\r\n          color=\"${m.requestMetrics.failedRequests > 0 ? 'danger' : 'positive'}\"\r\n        ></umbmetrics-metric-card>\r\n\r\n        <umbmetrics-metric-card\r\n          icon=\"icon-nodes\"\r\n          title=\"Threads\"\r\n          value=\"${m.threadInfo.threadCount}\"\r\n          detail=\"Pool: ${m.threadInfo.threadPoolThreadCount}\"\r\n        ></umbmetrics-metric-card>\r\n\r\n        <umbmetrics-metric-card\r\n          icon=\"icon-list\"\r\n          title=\"Work Items\"\r\n          value=\"${m.threadInfo.pendingWorkItemCount}\"\r\n          detail=\"Completed: ${formatNumber(m.threadInfo.completedWorkItemCount)}\"\r\n        ></umbmetrics-metric-card>\r\n\r\n        <umbmetrics-metric-card\r\n          span=\"4\"\r\n          icon=\"icon-calendar\"\r\n          title=\"Last Updated\"\r\n          value=\"${new Date(m.timestamp).toLocaleString()}\"\r\n        ></umbmetrics-metric-card>\r\n      </umbmetrics-metrics-grid>\r\n    `;\r\n  }\r\n\r\n  #renderHeapTab() {\r\n    if (!this._performanceMetrics) {\r\n      return html`<p>Click \"Refresh Metrics\" to load heap information</p>`;\r\n    }\r\n\r\n    const m = this._performanceMetrics;\r\n\r\n    const heapStats: StatRow[] = [\r\n      { label: 'Gen 0', value: `${m.memoryUsage.gcGen0HeapSizeMB.toFixed(2)} MB` },\r\n      { label: 'Gen 1', value: `${m.memoryUsage.gcGen1HeapSizeMB.toFixed(2)} MB` },\r\n      { label: 'Gen 2', value: `${m.memoryUsage.gcGen2HeapSizeMB.toFixed(2)} MB` },\r\n    ];\r\n\r\n    const collectionStats: StatRow[] = [\r\n      { label: 'Gen 0', value: formatNumber(m.garbageCollectionStats.gen0Collections) },\r\n      { label: 'Gen 1', value: formatNumber(m.garbageCollectionStats.gen1Collections) },\r\n      { label: 'Gen 2', value: formatNumber(m.garbageCollectionStats.gen2Collections) },\r\n    ];\r\n\r\n    const gcDetails: StatRow[] = [\r\n      { label: 'GC Mode', value: m.garbageCollectionStats.isServerGC ? \"Server\" : \"Workstation\" },\r\n      { label: 'Total Heap Size', value: `${m.memoryUsage.totalHeapSizeMB.toFixed(2)} MB` },\r\n      { label: 'Fragmented Memory', value: `${m.memoryUsage.fragmentedMemoryMB.toFixed(2)} MB` },\r\n      { label: 'Memory Load', value: `${m.garbageCollectionStats.memoryLoadMB.toFixed(2)} MB` },\r\n      { label: 'High Memory Threshold', value: `${m.garbageCollectionStats.highMemoryLoadThresholdMB.toFixed(2)} MB` },\r\n      { label: 'Latency Mode', value: m.garbageCollectionStats.gcLatencyMode },\r\n      { label: 'Total Pause Time', value: `${m.garbageCollectionStats.totalPauseTimeMs.toFixed(2)} ms` },\r\n    ];\r\n\r\n    return html`\r\n      <umbmetrics-metrics-grid columns=\"4\">\r\n        <umbmetrics-stat-card\r\n          span=\"2\"\r\n          icon=\"icon-box\"\r\n          title=\"GC Heap Sizes\"\r\n          .stats=${heapStats}\r\n        ></umbmetrics-stat-card>\r\n\r\n        <umbmetrics-stat-card\r\n          span=\"2\"\r\n          icon=\"icon-trash\"\r\n          title=\"GC Collections\"\r\n          .stats=${collectionStats}\r\n        ></umbmetrics-stat-card>\r\n\r\n        <umbmetrics-stat-card\r\n          span=\"4\"\r\n          icon=\"icon-chart\"\r\n          title=\"Garbage Collector Details\"\r\n          .stats=${gcDetails}\r\n        ></umbmetrics-stat-card>\r\n      </umbmetrics-metrics-grid>\r\n    `;\r\n  }\r\n\r\n  #renderUmbracoTab() {\r\n    if (!this._umbracoMetrics) {\r\n      return html`<p>Click \"Refresh Metrics\" to load Umbraco-specific data</p>`;\r\n    }\r\n\r\n    const m = this._umbracoMetrics;\r\n\r\n    const contentStats: StatRow[] = [\r\n      { label: 'Total Nodes', value: formatNumber(m.contentStatistics.totalContentNodes) },\r\n      { label: 'Published', value: formatNumber(m.contentStatistics.publishedNodes), color: 'positive' },\r\n      { label: 'Unpublished', value: formatNumber(m.contentStatistics.unpublishedNodes), color: 'warning' },\r\n      { label: 'Trashed', value: formatNumber(m.contentStatistics.trashedNodes), color: m.contentStatistics.trashedNodes > 0 ? 'danger' : 'positive' },\r\n      { label: 'Content Types', value: m.contentStatistics.contentTypeCount },\r\n    ];\r\n\r\n    const mediaStats: StatRow[] = [\r\n      { label: 'Total Items', value: formatNumber(m.mediaStatistics.totalMediaItems) },\r\n      { label: 'Total Size', value: `${m.mediaStatistics.totalMediaSizeMB.toFixed(2)} MB` },\r\n      { label: 'Images', value: formatNumber(m.mediaStatistics.imagesCount) },\r\n      { label: 'Documents', value: formatNumber(m.mediaStatistics.documentsCount) },\r\n      { label: 'Media Types', value: m.mediaStatistics.mediaTypeCount },\r\n    ];\r\n\r\n    const cacheStats: StatRow[] = [\r\n      { label: 'Runtime Cache', value: `${formatNumber(m.cacheStatistics.runtimeCacheCount)} items` },\r\n      { label: 'NuCache', value: `${formatNumber(m.cacheStatistics.nuCacheCount)} items` },\r\n      { label: 'Total Size', value: m.cacheStatistics.totalCacheSize },\r\n    ];\r\n\r\n    const userStats: StatRow[] = [\r\n      { label: 'Total Users', value: formatNumber(m.backofficeUsers.totalUsers) },\r\n      { label: 'Active Users', value: formatNumber(m.backofficeUsers.activeUsers), color: 'positive' },\r\n      { label: 'Administrators', value: formatNumber(m.backofficeUsers.adminUsers) },\r\n      { label: 'Current Sessions', value: formatNumber(m.backofficeUsers.currentSessions), color: m.backofficeUsers.currentSessions > 0 ? 'positive' : 'default' },\r\n    ];\r\n\r\n    return html`\r\n      <umbmetrics-metrics-grid columns=\"4\">\r\n        <umbmetrics-stat-card\r\n          span=\"2\"\r\n          icon=\"icon-document\"\r\n          title=\"Content Statistics\"\r\n          .stats=${contentStats}\r\n        ></umbmetrics-stat-card>\r\n\r\n        <umbmetrics-stat-card\r\n          span=\"2\"\r\n          icon=\"icon-picture\"\r\n          title=\"Media Library\"\r\n          .stats=${mediaStats}\r\n        ></umbmetrics-stat-card>\r\n\r\n        <umbmetrics-stat-card\r\n          span=\"2\"\r\n          icon=\"icon-server-alt\"\r\n          title=\"Cache Performance\"\r\n          .stats=${cacheStats}\r\n        ></umbmetrics-stat-card>\r\n\r\n        <umbmetrics-stat-card\r\n          span=\"2\"\r\n          icon=\"icon-users\"\r\n          title=\"Backoffice Users\"\r\n          .stats=${userStats}\r\n        ></umbmetrics-stat-card>\r\n      </umbmetrics-metrics-grid>\r\n    `;\r\n  }\r\n\r\n  #renderUtilsTab() {\r\n    return html`\r\n      <div class=\"utils-tab\">\r\n        <h3>Utility Tools</h3>\r\n        <p class=\"description\">Additional tools for managing and exporting metrics data</p>\r\n        \r\n        <div class=\"utils-grid\">\r\n          <div class=\"util-card\">\r\n            <div class=\"util-icon\">\r\n              <uui-icon name=\"icon-download\"></uui-icon>\r\n            </div>\r\n            <div class=\"util-content\">\r\n              <h4>Export Metrics</h4>\r\n              <p>Export performance and Umbraco metrics in various formats (CSV, JSON)</p>\r\n              <uui-button \r\n                look=\"primary\" \r\n                color=\"positive\"\r\n                @click=\"${this.#openExportModal}\"\r\n                style=\"margin-top: 1rem;\"\r\n              >\r\n                <uui-icon name=\"icon-download\"></uui-icon>\r\n                Open Export Dialog\r\n              </uui-button>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"util-card\">\r\n            <div class=\"util-icon\">\r\n              <uui-icon name=\"icon-settings\"></uui-icon>\r\n            </div>\r\n            <div class=\"util-content\">\r\n              <h4>Data Management</h4>\r\n              <p>Manage historical metrics data and cleanup options</p>\r\n              <uui-button \r\n                look=\"outline\"\r\n                style=\"margin-top: 1rem;\"\r\n                disabled\r\n              >\r\n                <uui-icon name=\"icon-trash\"></uui-icon>\r\n                Cleanup Old Data\r\n              </uui-button>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"util-card\">\r\n            <div class=\"util-icon\">\r\n              <uui-icon name=\"icon-chart\"></uui-icon>\r\n            </div>\r\n            <div class=\"util-content\">\r\n              <h4>Advanced Analytics</h4>\r\n              <p>Generate detailed reports and analytics from collected metrics</p>\r\n              <uui-button \r\n                look=\"outline\"\r\n                style=\"margin-top: 1rem;\"\r\n                disabled\r\n              >\r\n                <uui-icon name=\"icon-chart\"></uui-icon>\r\n                Generate Report\r\n              </uui-button>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"util-card\">\r\n            <div class=\"util-icon\">\r\n              <uui-icon name=\"icon-alarm-clock\"></uui-icon>\r\n            </div>\r\n            <div class=\"util-content\">\r\n              <h4>Scheduled Tasks</h4>\r\n              <p>Schedule automatic exports and data collection tasks</p>\r\n              <uui-button \r\n                look=\"outline\"\r\n                style=\"margin-top: 1rem;\"\r\n                disabled\r\n              >\r\n                <uui-icon name=\"icon-time\"></uui-icon>\r\n                Schedule Export\r\n              </uui-button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  #renderTabContent() {\r\n    switch (this._activeTab) {\r\n      case 'overview':\r\n        return this.#renderOverviewTab();\r\n      case 'heap':\r\n        return this.#renderHeapTab();\r\n      case 'umbraco':\r\n        return this.#renderUmbracoTab();\r\n      case 'utils':\r\n        return this.#renderUtilsTab();\r\n      default:\r\n        return this.#renderOverviewTab();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return html`\r\n      <uui-box headline=\"Application Performance Metrics\" class=\"wide\">\r\n        <div slot=\"header\">[.NET 10 Application - Real-time Metrics${this._contextCurrentUser?.name ? ` - ${this._contextCurrentUser.name}` : ''}]</div>\r\n\r\n        <div class=\"metrics-controls\">\r\n          <uui-button color=\"default\" look=\"primary\" @click=\"${this.#onClickRefreshMetrics}\">\r\n            <uui-icon name=\"icon-refresh\"></uui-icon> Refresh Metrics\r\n          </uui-button>\r\n\r\n          <uui-toggle\r\n            label=\"Real-time Updates (SignalR)\"\r\n            .checked=\"${this._autoRefresh}\"\r\n            @change=\"${this.#toggleAutoRefresh}\"\r\n          ></uui-toggle>\r\n\r\n          ${this._isConnected ? html`\r\n            <span class=\"connection-status connected\">\r\n              <uui-icon name=\"icon-check\"></uui-icon> Connected\r\n            </span>\r\n          ` : this._autoRefresh ? html`\r\n            <span class=\"connection-status connecting\">\r\n              <uui-icon name=\"icon-time\"></uui-icon> Connecting...\r\n            </span>\r\n          ` : ''}\r\n        </div>\r\n\r\n        <div class=\"tab-navigation\">\r\n          <uui-button \r\n            look=\"${this._activeTab === 'overview' ? 'primary' : 'default'}\"\r\n            color=\"${this._activeTab === 'overview' ? 'positive' : 'default'}\"\r\n            @click=\"${() => this.#switchTab('overview')}\"\r\n          >\r\n            <uui-icon name=\"icon-chart\"></uui-icon> Overview\r\n          </uui-button>\r\n          <uui-button \r\n            look=\"${this._activeTab === 'heap' ? 'primary' : 'default'}\"\r\n            color=\"${this._activeTab === 'heap' ? 'positive' : 'default'}\"\r\n            @click=\"${() => this.#switchTab('heap')}\"\r\n          >\r\n            <uui-icon name=\"icon-box\"></uui-icon> Heap & GC\r\n          </uui-button>\r\n          <uui-button \r\n            look=\"${this._activeTab === 'umbraco' ? 'primary' : 'default'}\"\r\n            color=\"${this._activeTab === 'umbraco' ? 'positive' : 'default'}\"\r\n            @click=\"${() => this.#switchTab('umbraco')}\"\r\n          >\r\n            <uui-icon name=\"icon-umbraco\"></uui-icon> Umbraco\r\n          </uui-button>\r\n          <uui-button \r\n            look=\"${this._activeTab === 'utils' ? 'primary' : 'default'}\"\r\n            color=\"${this._activeTab === 'utils' ? 'positive' : 'default'}\"\r\n            @click=\"${() => this.#switchTab('utils')}\"\r\n          >\r\n            <uui-icon name=\"icon-settings\"></uui-icon> Utils\r\n          </uui-button>\r\n        </div>\r\n\r\n        <div class=\"tab-content\">\r\n          ${this.#renderTabContent()}\r\n        </div>\r\n      </uui-box>\r\n          `;\r\n  }\r\n\r\n  static styles = css`${unsafeCSS(stylesString)}`;\r\n}\r\n\r\nexport default UmbMetrcisDashboardElement;\r\n\r\ndeclare global {\r\n  interface HTMLElementTagNameMap {\r\n    \"umbmetrics-dashboard\": UmbMetrcisDashboardElement;\r\n  }\r\n}\r\n"],"names":["getStatusColor","value","threshold","formatNumber","num","formatUptime","seconds","days","hours","minutes","secs","AppInfoBannerElement","UmbElementMixin","LitElement","html","css","unsafeCSS","styles","__decorateClass","property","customElement","_handleClick","MetricCardElement","__privateAdd","__privateGet","MetricsGridElement","StatCardElement","stat","_notificationContext","_authContext","_metricsService","_unsubscribe","_onClickRefreshMetrics","_loadPerformanceMetrics","_UmbMetrcisDashboardElement_instances","loadUmbracoMetrics_fn","_openActiveRequestsSidebar","_openExportModal","_toggleAutoRefresh","_startAutoRefresh","_stopAutoRefresh","_switchTab","renderOverviewTab_fn","renderHeapTab_fn","renderUmbracoTab_fn","renderUtilsTab_fn","renderTabContent_fn","UmbMetrcisDashboardElement","ev","buttonElement","__privateMethod","error","UMB_MODAL_MANAGER_CONTEXT","ACTIVE_REQUESTS_SIDEBAR_MODAL","UMB_METRICS_EXPORT_MODAL","__privateSet","metrics","tabName","UMB_NOTIFICATION_CONTEXT","notificationContext","UMB_CURRENT_USER_CONTEXT","currentUserContext","currentUser","UMB_AUTH_CONTEXT","authContext","MetricsPerformanceService","token","m","heapStats","collectionStats","gcDetails","contentStats","mediaStats","cacheStats","userStats","stylesString","state","UmbMetrcisDashboardElement_default"],"mappings":"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"}